{"version":3,"sources":["../lib/test.js"],"names":[],"mappings":";;AAAA,IAAI,SAAS,QAAQ,QAAR,CAAb;AACA,IAAI,OAAO,QAAQ,WAAR,CAAX;AACA,IAAI,WAAW,QAAQ,YAAR,CAAf;AACA,IAAI,QAAQ,QAAQ,SAAR,CAAZ;AACA,IAAI,aAAa,QAAQ,SAAR,CAAjB;;AAEA;AACA,IAAI,YAAY,QAAQ,GAAR,CAAY,SAAZ,GAAwB,IAAxB,GAA+B,KAA/C;;AAEA,IAAI;AACF,UAAQ,GAAR,CAAY,8BAAZ;;AAEA;AACA,WAAS,+BAAT,EAA0C,YAAW;AACnD,QAAI,QAAJ;AACA,OAAG,8CAAH,EAAmD,UAAS,IAAT,EAAe;AAChE,UAAI;AACF,mBAAW,IAAI,IAAJ,EAAX;AACA,eAAO,QAAP,EAAiB,4CAAjB;AACD,OAHD,CAGE,OAAO,GAAP,EAAY;AACZ;AACD;AACF,KAPD;AAQD,GAVD;;AAYA;AACA,WAAS,qBAAT,EAAgC,YAAW;AACzC,OAAG,sDAAH,EAA2D,UAAS,IAAT,EAAe;AACxE,eAAS,KAAT,CAAe,GAAf,CAAmB,UAAnB,EAA+B,UAAS,GAAT,EAAc,IAAd,EAAoB;AACjD,eAAO,CAAC,GAAR,EAAa,2DAAb;AACA,eAAO,CAAC,IAAR,EAAc,6CAAd;AACA;AACD,OAJD;AAKD,KAND;;AAQA,OAAG,wDAAH,EAA6D,UAAS,IAAT,EAAe;AAC1E,eAAS,KAAT,CAAe,GAAf,CAAmB,UAAnB,EAA+B,MAA/B,EAAuC,YAAW;AAChD,iBAAS,KAAT,CAAe,GAAf,CAAmB,UAAnB,EAA+B,UAAS,GAAT,EAAc,IAAd,EAAoB;AACjD,iBAAO,CAAC,GAAR,EAAa,kDAAb;AACA,iBAAO,QAAQ,MAAf,EAAuB,8CAAvB;AACA;AACD,SAJD;AAKD,OAND;AAOD,KARD;AASD,GAlBD;;AAoBA;AACA,WAAS,wCAAT,EAAmD,YAAW;AAC5D,OAAG,4CAAH,EAAiD,YAAW;AAC1D,aAAO,MAAM,OAAN,CAAc,WAAW,QAAzB,CAAP,EAA2C,yDAA3C;AACD,KAFD;AAGA,OAAG,0CAAH,EAA+C,YAAW;AACxD,aAAO,WAAW,KAAX,CAAiB,WAAjB,KAAiC,GAAG,WAA3C,EAAwD,+CAAxD;AACD,KAFD;;AAIA,SAAI,IAAI,IAAE,CAAN,EAAS,IAAb,EAAmB,OAAO,WAAW,QAAX,CAAoB,GAApB,CAA1B,GAAqD;AAClD,iBAAS,IAAT,EAAc;AAAC,+BAAqB,CAArB,UAA2B,KAAK,IAAhC,iDAAkF,YAAW;AAC3G,iBAAO,WAAW,KAAX,CAAkB,KAAK,IAAvB,MAAkC,SAAzC,YAA4D,KAAK,IAAjE,qCAAqG,KAAK,IAA1G;AACD,SAFe;AAEb,OAFF,EAEG,IAFH,CAAD;AAGD;AACF,GAbD;AAeD,CArDD,CAqDE,OAAO,GAAP,EAAY;AACZ,UAAQ,KAAR,CAAc,mBAAd;AACA,UAAQ,KAAR,CAAc,GAAd;AACA,UAAQ,IAAR,CAAa,CAAb;AACD","file":"test.js","sourcesContent":["var assert = require(\"assert\");\r\nvar Park = require(\"./park.js\");\r\nvar Settings = require(\"./settings\");\r\nvar Debug = require(\"./debug\");\r\nvar themeparks = require(\"./index\");\r\n\r\n// optional environment variable to print out API results\r\nvar PRINTDATA = process.env.PRINTDATA ? true : false;\r\n\r\ntry {\r\n  console.log(\"Starting themeparks tests...\");\r\n\r\n  // test base park implementation doesn't implement anything invalid\r\n  describe(\"Test base park implementation\", function() {\r\n    var parkBase;\r\n    it(\"should not create the park base successfully\", function(done) {\r\n      try {\r\n        parkBase = new Park();\r\n        assert(parkBase, \"parkBase should not successfully construct\");\r\n      } catch (err) {\r\n        done();\r\n      }\r\n    });\r\n  });\r\n\r\n  // some caching tests\r\n  describe(\"Test caching module\", function() {\r\n    it(\"should not return valid data when no data is present\", function(done) {\r\n      Settings.Cache.get(\"cachekey\", function(err, data) {\r\n        assert(!err, \"Getting non-existant cache data shouldn't return an error\");\r\n        assert(!data, \"Cache returned data when it should not have\");\r\n        done();\r\n      });\r\n    });\r\n\r\n    it(\"should return valid data from cache after setting data\", function(done) {\r\n      Settings.Cache.set(\"cachekey\", \"data\", function() {\r\n        Settings.Cache.get(\"cachekey\", function(err, data) {\r\n          assert(!err, \"Getting set cache data shouldn't return an error\");\r\n          assert(data == \"data\", \"Cache didn't return data when it should have\");\r\n          done();\r\n        });\r\n      });\r\n    });\r\n  });\r\n\r\n  // test exposed parks are done correctly\r\n  describe(\"Test exposed parks are setup correctly\", function() {\r\n    it(\"should have an array of parks as .AllParks\", function() {\r\n      assert(Array.isArray(themeparks.AllParks), \".AllParks should be an array of all the parks available\");\r\n    });\r\n    it(\"should have an object of parks as .Parks\", function() {\r\n      assert(themeparks.Parks.constructor === {}.constructor, \".Parks should be an object of available parks\");\r\n    });\r\n\r\n    for(var i=0, park; park = themeparks.AllParks[i++];) {\r\n      (function(park){it(`park .AllParks[${i}]{${park.name}} should have a corresponding .Parks entry`, function() {\r\n        assert(themeparks.Parks[ park.name ] !== undefined, `park ${park.name} should have an entry called ${park.name} in .Parks`);\r\n      })}(park));\r\n    }\r\n  });\r\n\r\n} catch (err) {\r\n  console.error(\"Unit tests failed\")\r\n  console.error(err);\r\n  process.exit(1);\r\n}"]}